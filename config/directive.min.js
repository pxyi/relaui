app.directive("pagination",function(){return{restrict:"EA",templateUrl:"config/directive/directiveView/pagination.html",replace:!0,scope:{url:"@",data:"=",query:"="},controller:function($scope,$http){$scope.query={},$scope.pageNumList=[{value:10,text:10},{value:20,text:20},{value:30,text:30},{value:50,text:50},{value:100,text:100}],$scope.query.$query=function(pageNo){$scope.query.pageNo=pageNo||1,$scope.query.pageSize=$scope.pageNumber?$scope.pageNumber.value:10;var params={};for(v in $scope.query)"$query"!==v&&(params[v]=$scope.query[v]);$scope.$emit("loading",!0),$http({url:$scope.url,method:"get",params:params}).then(function(res){$scope.$emit("loading",!1),$scope.data=res.data,1e3==res.data.code?($scope.pegeNo=res.data.pageNo,$scope.pageCount=res.data.pageCount,$scope.pageSize=res.data.pageSize,$scope.pageTotal=Math.ceil(res.data.pageCount/res.data.pageSize)):$scope.$emit("prompt",{text:res.data.message})},function(e){$scope.$emit("loading",!1),$scope.$emit("prompt",{text:"网络错误，请刷新重试"})})},$scope.query.$query(1,$scope.query)},link:function(scope,element,attrs){scope.pagesNumberChange=function(){scope.pagesNumber=parseInt(scope.pagesNumber.replace(/[^\d]/g,"")),scope.pagesNumber=scope.pagesNumber<=0?1:scope.pagesNumber,scope.pagesNumber=scope.pagesNumber>scope.pageTotal?scope.pageTotal:scope.pagesNumber}}}}),app.directive("test",function(){return{restrict:"EA",templateUrl:"config/directive/directiveView/test.html",replace:!0,scope:{details:"="},controller:function($scope){$scope.details=$scope.details?$scope.details:{},$scope.details.ccc=function(){console.log(111)}},link:function(){}}});